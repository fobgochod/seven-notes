<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mysql调优--索引基本实现原理及索引优化 | Seven</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta name="description" content="七的笔记">
    
    <link rel="preload" href="/assets/css/0.styles.aede7ece.css" as="style"><link rel="preload" href="/assets/js/app.ce51a5d3.js" as="script"><link rel="preload" href="/assets/js/3.f24ff8fe.js" as="script"><link rel="preload" href="/assets/js/4.1273e66a.js" as="script"><link rel="preload" href="/assets/js/48.02d9740f.js" as="script"><link rel="prefetch" href="/assets/js/1.926ddd82.js"><link rel="prefetch" href="/assets/js/10.0c85903b.js"><link rel="prefetch" href="/assets/js/100.de19e7db.js"><link rel="prefetch" href="/assets/js/101.54cbee36.js"><link rel="prefetch" href="/assets/js/102.13ed96b3.js"><link rel="prefetch" href="/assets/js/103.379296c1.js"><link rel="prefetch" href="/assets/js/104.e5fc70de.js"><link rel="prefetch" href="/assets/js/105.8b216e47.js"><link rel="prefetch" href="/assets/js/106.5b128a51.js"><link rel="prefetch" href="/assets/js/107.a0878bf4.js"><link rel="prefetch" href="/assets/js/108.9621afd3.js"><link rel="prefetch" href="/assets/js/109.8c7b224c.js"><link rel="prefetch" href="/assets/js/11.c3175057.js"><link rel="prefetch" href="/assets/js/110.7b9444ae.js"><link rel="prefetch" href="/assets/js/111.febdd2d2.js"><link rel="prefetch" href="/assets/js/112.e4e4f614.js"><link rel="prefetch" href="/assets/js/113.feab0ab4.js"><link rel="prefetch" href="/assets/js/114.e0a34986.js"><link rel="prefetch" href="/assets/js/115.60fd4798.js"><link rel="prefetch" href="/assets/js/116.ac9d468f.js"><link rel="prefetch" href="/assets/js/117.5d39e51d.js"><link rel="prefetch" href="/assets/js/12.1eadd4f4.js"><link rel="prefetch" href="/assets/js/13.c22e11e1.js"><link rel="prefetch" href="/assets/js/14.be9c9479.js"><link rel="prefetch" href="/assets/js/15.8d5bbfbe.js"><link rel="prefetch" href="/assets/js/16.424a1508.js"><link rel="prefetch" href="/assets/js/17.b97ae387.js"><link rel="prefetch" href="/assets/js/18.adeb444e.js"><link rel="prefetch" href="/assets/js/19.ea5bb19b.js"><link rel="prefetch" href="/assets/js/20.7b00e2b6.js"><link rel="prefetch" href="/assets/js/21.b41b2b2e.js"><link rel="prefetch" href="/assets/js/22.0bd4107d.js"><link rel="prefetch" href="/assets/js/23.51240309.js"><link rel="prefetch" href="/assets/js/24.c798b022.js"><link rel="prefetch" href="/assets/js/25.6bd38626.js"><link rel="prefetch" href="/assets/js/26.6ba62055.js"><link rel="prefetch" href="/assets/js/27.878ca929.js"><link rel="prefetch" href="/assets/js/28.94425f5a.js"><link rel="prefetch" href="/assets/js/29.1afbedd1.js"><link rel="prefetch" href="/assets/js/30.cca73dff.js"><link rel="prefetch" href="/assets/js/31.15849bf5.js"><link rel="prefetch" href="/assets/js/32.e9e40f6c.js"><link rel="prefetch" href="/assets/js/33.c6ad56eb.js"><link rel="prefetch" href="/assets/js/34.5aebdd22.js"><link rel="prefetch" href="/assets/js/35.564d05d4.js"><link rel="prefetch" href="/assets/js/36.c939b277.js"><link rel="prefetch" href="/assets/js/37.64040fd5.js"><link rel="prefetch" href="/assets/js/38.c01a2a98.js"><link rel="prefetch" href="/assets/js/39.396d926e.js"><link rel="prefetch" href="/assets/js/40.96ac5e7d.js"><link rel="prefetch" href="/assets/js/41.eded75fc.js"><link rel="prefetch" href="/assets/js/42.87c30940.js"><link rel="prefetch" href="/assets/js/43.4115ede8.js"><link rel="prefetch" href="/assets/js/44.589bb0ec.js"><link rel="prefetch" href="/assets/js/45.5b728909.js"><link rel="prefetch" href="/assets/js/46.c492dab7.js"><link rel="prefetch" href="/assets/js/47.cbaf17e5.js"><link rel="prefetch" href="/assets/js/49.d2d61eb8.js"><link rel="prefetch" href="/assets/js/5.18efea5e.js"><link rel="prefetch" href="/assets/js/50.468287fe.js"><link rel="prefetch" href="/assets/js/51.5b27291d.js"><link rel="prefetch" href="/assets/js/52.07b51fb4.js"><link rel="prefetch" href="/assets/js/53.eaffb0d1.js"><link rel="prefetch" href="/assets/js/54.fc0aa46e.js"><link rel="prefetch" href="/assets/js/55.91a29610.js"><link rel="prefetch" href="/assets/js/56.90cf2e80.js"><link rel="prefetch" href="/assets/js/57.a1c6fb08.js"><link rel="prefetch" href="/assets/js/58.71924bf6.js"><link rel="prefetch" href="/assets/js/59.224a4100.js"><link rel="prefetch" href="/assets/js/6.fc3ed4b8.js"><link rel="prefetch" href="/assets/js/60.cd0c65d0.js"><link rel="prefetch" href="/assets/js/61.1eb4715d.js"><link rel="prefetch" href="/assets/js/62.ddb6f8dc.js"><link rel="prefetch" href="/assets/js/63.2a74ec85.js"><link rel="prefetch" href="/assets/js/64.09525755.js"><link rel="prefetch" href="/assets/js/65.79d41a6e.js"><link rel="prefetch" href="/assets/js/66.3fcf3ccd.js"><link rel="prefetch" href="/assets/js/67.fb75c138.js"><link rel="prefetch" href="/assets/js/68.ae0eba7c.js"><link rel="prefetch" href="/assets/js/69.811a853f.js"><link rel="prefetch" href="/assets/js/7.d60f131d.js"><link rel="prefetch" href="/assets/js/70.6405e56c.js"><link rel="prefetch" href="/assets/js/71.d9415fcb.js"><link rel="prefetch" href="/assets/js/72.32fd509c.js"><link rel="prefetch" href="/assets/js/73.dc5759cc.js"><link rel="prefetch" href="/assets/js/74.d596314d.js"><link rel="prefetch" href="/assets/js/75.02f6de71.js"><link rel="prefetch" href="/assets/js/76.e46c4434.js"><link rel="prefetch" href="/assets/js/77.e9645bd7.js"><link rel="prefetch" href="/assets/js/78.305be19e.js"><link rel="prefetch" href="/assets/js/79.17a749fc.js"><link rel="prefetch" href="/assets/js/8.191297f4.js"><link rel="prefetch" href="/assets/js/80.57a3c745.js"><link rel="prefetch" href="/assets/js/81.b54df60a.js"><link rel="prefetch" href="/assets/js/82.03fb9145.js"><link rel="prefetch" href="/assets/js/83.e60d8a06.js"><link rel="prefetch" href="/assets/js/84.d63dc991.js"><link rel="prefetch" href="/assets/js/85.662116d1.js"><link rel="prefetch" href="/assets/js/86.17eda654.js"><link rel="prefetch" href="/assets/js/87.8385307c.js"><link rel="prefetch" href="/assets/js/88.97041960.js"><link rel="prefetch" href="/assets/js/89.e2b5b3f8.js"><link rel="prefetch" href="/assets/js/9.043adbe9.js"><link rel="prefetch" href="/assets/js/90.46798d5d.js"><link rel="prefetch" href="/assets/js/91.dde708b0.js"><link rel="prefetch" href="/assets/js/92.a27f87cb.js"><link rel="prefetch" href="/assets/js/93.a46ec405.js"><link rel="prefetch" href="/assets/js/94.fc22ca4b.js"><link rel="prefetch" href="/assets/js/95.e7411826.js"><link rel="prefetch" href="/assets/js/96.77c5124f.js"><link rel="prefetch" href="/assets/js/97.9e77fc81.js"><link rel="prefetch" href="/assets/js/98.2f125335.js"><link rel="prefetch" href="/assets/js/99.ff28a95a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aede7ece.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo/book.png" alt="Seven" class="logo"> <span class="site-name can-hide">Seven</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><span class="title">友情链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="友情链接" class="mobile-dropdown-title"><span class="title">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          阅读
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://icyfenix.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  软件架构探索
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的网络日志
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.whywhy.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Why技术
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.ideabuffer.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Idea Buffer
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tech.meituan.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  美团技术团队
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mybatis.org/mybatis-3/zh/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MyBatis
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          模版
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cn.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v2.vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/vuepressjs/awesome-vuepress" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Awesome VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://vssue.js.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vssue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://baomidou.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MyBatis-Plus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.pdai.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 全栈知识体系
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          DevOps
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/fobgochod/seven-notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文档工程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://travis-ci.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Travis CI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://raw.githubusercontent.com/fobgochod/seven-notes/gh-pages/pdf/the-seven-notes.pdf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PDF下载
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接" class="dropdown-title"><span class="title">友情链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="友情链接" class="mobile-dropdown-title"><span class="title">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          阅读
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://icyfenix.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  软件架构探索
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.ruanyifeng.com/blog/archives.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的网络日志
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.whywhy.vip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Why技术
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.ideabuffer.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Idea Buffer
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://tech.meituan.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  美团技术团队
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mybatis.org/mybatis-3/zh/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MyBatis
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          模版
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cn.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v2.vuepress.vuejs.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/vuepressjs/awesome-vuepress" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Awesome VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://vssue.js.org/zh" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vssue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://baomidou.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MyBatis-Plus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.pdai.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 全栈知识体系
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          DevOps
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/fobgochod/seven-notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文档工程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://travis-ci.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Travis CI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://raw.githubusercontent.com/fobgochod/seven-notes/gh-pages/pdf/the-seven-notes.pdf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PDF下载
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/summary/" class="sidebar-link">目录</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/introduction/about-me.html" class="sidebar-link">关于作者</a></li><li><a href="/zh/introduction/about-the-project.html" class="sidebar-link">关于6+1</a></li><li><a href="/zh/introduction/guide/quick-start.html" class="sidebar-link">如何开始</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开发手册</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Frontend</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/developer/frontend/npm.html" class="sidebar-link">NPM</a></li><li><a href="/zh/developer/frontend/yarn.html" class="sidebar-link">Yarn</a></li><li><a href="/zh/developer/frontend/vuepress.html" class="sidebar-link">VuePress</a></li><li><a href="/zh/developer/frontend/gitbook.html" class="sidebar-link">GitBook</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Backend</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/developer/backend/java/java-install.html" class="sidebar-link">Install</a></li><li><a href="/zh/developer/backend/java/java-tools.html" class="sidebar-link">Java问题排查</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>JUC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>JVM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>ZooKeeper</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>SysIO</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>MySQL</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/database/mysql/data.html" class="sidebar-link">基础数据</a></li><li><a href="/zh/database/mysql/lesson/" aria-current="page" class="sidebar-link">MySQL笔记</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>MariaDB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>MongoDB</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/computer/nous.html" class="sidebar-link">常识</a></li><li><a href="/zh/computer/network.html" class="sidebar-link">网络基础</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Windows</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>读书笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/notes/understanding-the-jvm.html" class="sidebar-link">深入理解Java虚拟机</a></li><li><a href="/zh/notes/on-java-8.html" class="sidebar-link">On Java 8</a></li><li><a href="/zh/notes/mashibing.html" class="sidebar-link">Video</a></li><li><a href="/zh/notes/blog.html" class="sidebar-link">博客</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>面试</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/notes/interview/abstract-queued-synchronizer.html" class="sidebar-link">AQS(CLH)</a></li><li><a href="/zh/notes/interview/thread-pool.html" class="sidebar-link">ThreadPool</a></li><li><a href="/zh/notes/interview/java-virtual-machine.html" class="sidebar-link">JVM</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>附录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/appendix/markdown.html" class="sidebar-link">Markdown基本语法</a></li><li><a href="/zh/appendix/halo.html" class="sidebar-link">Halo</a></li><li><a href="/zh/appendix/git.html" class="sidebar-link">Git</a></li><li><a href="/zh/appendix/tools.html" class="sidebar-link">乱七八糟</a></li><li><a href="/zh/appendix/proper-noun.html" class="sidebar-link">专有名词解释</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql调优-索引基本实现原理及索引优化">mysql调优--索引基本实现原理及索引优化</h1> <h2 id="索引基本实现原理">索引基本实现原理</h2> <h3 id="数据结构演讲">数据结构演讲</h3> <ul><li>哈希表</li> <li>二叉树
<ul><li>进行数据插入时候，会造成一条腿长一条腿短</li> <li>树节点过深（IO次数多，瓶颈）</li></ul></li> <li>BST树、二叉搜索树
<ul><li>1</li></ul></li> <li>AVL树
<ul><li>最短子树和最长子树不超过1）</li> <li>1到N次旋转</li> <li>插入删除效率低、查询高</li> <li>节点过深</li></ul></li> <li>红黑树
<ul><li>最短子树和最长子树不超过2倍</li> <li>任何一个单分支不能出现两个同色节点</li> <li>节点过深</li></ul></li> <li>B树</li> <li>B+树</li></ul> <h2 id="索引优化">索引优化</h2> <h3 id="索引基本知识">索引基本知识</h3> <h4 id="索引的优点">索引的优点</h4> <ol><li>大大减少了服务器需要扫描的数据量</li> <li>帮助服务器避免排序和临时表</li> <li>将随机io变成顺序io</li></ol> <h4 id="索引的用处">索引的用处</h4> <ol><li>快速查找匹配WHERE子句的行</li> <li>从consideration中消除行,如果可以在多个索引之间进行选择，mysql通常会使用找到最少行的索引</li> <li>如果表具有多列索引，则优化器可以使用索引的任何最左前缀来查找行</li> <li>当有表连接的时候，从其他表检索行数据</li> <li>查找特定索引列的min或max值</li> <li>如果排序或分组时在可用索引的最左前缀上完成的，则对表进行排序和分组</li> <li>在某些情况下，可以优化查询以检索值而无需查询数据行</li></ol> <h4 id="索引的分类">索引的分类</h4> <ul><li>主键索引</li> <li>唯一索引</li> <li>普通索引</li> <li>全文索引</li> <li>组合索引</li></ul> <h4 id="面试技术名词">面试技术名词</h4> <ul><li>回表
<ul><li>根据辅助索引查询到主键，再根据主键查询整行记录，<code>回表</code>表示回到主键这课B+树查找数据</li></ul></li> <li>覆盖索引
<ul><li>直接通过辅助索引就得到了所有数据，没有回表的过程</li> <li>Using index</li></ul></li> <li>最左匹配
<ul><li>组合索引才有的概念</li></ul></li> <li>索引下推
<ul><li>组合索引才有的概念</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">where</span> name <span class="token operator">=</span> ? <span class="token operator">and</span> age <span class="token operator">=</span> ?
<span class="token comment"># mysql架构：client-&gt;server-&gt;存储引擎</span>
<span class="token comment"># 1、没有索引下推（老版本）：首先根据name从存储引擎把符合条件的数据拉取回来，然后在server层再过滤age</span>
<span class="token comment"># 2、有索引下推后（新版本）：根据name、age两个列的值去匹配对应的记录，直接返回数据 </span>
<span class="token keyword">Using</span> <span class="token keyword">index</span> condition
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>谓词下推</li> <li>索引合并</li> <li>索引页分裂、页合并</li></ul> <h4 id="索引采用的数据结构">索引采用的数据结构</h4> <ul><li>哈希表(MEMORY)</li> <li>B+树(InnoDB、MyISAM)</li></ul> <h4 id="索引匹配方式">索引匹配方式</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> staffs<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span> <span class="token keyword">comment</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token keyword">comment</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span>
    pos <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span> <span class="token keyword">comment</span> <span class="token string">'职位'</span><span class="token punctuation">,</span>
    add_time <span class="token keyword">timestamp</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">comment</span> <span class="token string">'入职时间'</span>
<span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8 <span class="token keyword">comment</span> <span class="token string">'员工记录表'</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> staffs <span class="token keyword">add</span> <span class="token keyword">index</span> idx_nap<span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>全值匹配</li></ul> <blockquote><p>全值匹配指的是和索引中的所有列进行匹配</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> staffs <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'July'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token string">'23'</span> <span class="token operator">and</span> pos <span class="token operator">=</span> <span class="token string">'dev'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>匹配最左前缀</li></ul> <blockquote><p>只匹配前面的几列</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> staffs <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'July'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token string">'23'</span><span class="token punctuation">;</span>
<span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> staffs <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'July'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>匹配列前缀</li></ul> <blockquote><p>可以匹配某一列的值的开头部分</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> staffs <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'J%'</span><span class="token punctuation">;</span>
<span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> staffs <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%y'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>匹配范围值</li></ul> <blockquote><p>可以查找某一个范围的数据</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> staffs <span class="token keyword">where</span> name <span class="token operator">&gt;</span> <span class="token string">'Mary'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>精确匹配某一列并范围匹配另外一列</li></ul> <blockquote><p>可以查询第一列的全部和第二列的部分</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> staffs <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'July'</span> <span class="token operator">and</span> age <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>只访问索引的查询</li></ul> <blockquote><p>查询的时候只需要访问索引，不需要访问数据行，本质上就是覆盖索引</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>pos <span class="token keyword">from</span> staffs <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'July'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token number">25</span> <span class="token operator">and</span> pos <span class="token operator">=</span> <span class="token string">'dev'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="哈希索引">哈希索引</h3> <ul><li><p>基于哈希表的实现，只有精确匹配索引所有列的查询才有效</p></li> <li><p>在mysql中，只有memory的存储引擎显式支持哈希索引</p></li> <li><p>哈希索引自身只需存储对应的hash值，所以索引的结构十分紧凑，这让哈希索引查找的速度非常快</p></li> <li><p>哈希索引的限制</p> <ol><li>哈希索引只包含哈希值和行指针，而不存储字段值，索引不能使用索引中的值来避免读取行</li> <li>哈希索引数据并不是按照索引值顺序存储的，所以无法进行排序</li> <li>哈希索引不支持部分列匹配查找，哈希索引是使用索引列的全部内容来计算哈希值</li> <li>哈希索引支持等值比较查询，也不支持任何范围查询</li> <li>访问哈希索引的数据非常快，除非有很多哈希冲突，当出现哈希冲突的时候，存储引擎必须遍历链表中的所有行指针，逐行进行比较，直到找到所有符合条件的行</li> <li>哈希冲突比较多的话，维护的代价也会很高</li></ol></li> <li><p>案例</p> <ul><li>当需要存储大量的URL，并且根据URL进行搜索查找，如果使用B+树，存储的内容就会很大</li> <li>select id from url where url=&quot;&quot;</li> <li>也可以利用将url使用CRC32做哈希，可以使用以下查询方式：</li> <li>select id fom url where url=&quot;&quot; and url_crc=CRC32(&quot;&quot;)</li> <li>此查询性能较高原因是使用体积很小的索引来完成查找</li> <li>CRC32: 循环冗余校验</li></ul></li></ul> <h3 id="组合索引">组合索引</h3> <ul><li>当包含多个列作为索引，需要注意的是正确的顺序依赖于该索引的查询，同时需要考虑如何更好的满足排序和分组的需要</li> <li>案例，建立组合索引a,b,c
<ul><li>不同SQL语句使用索引情况
<img src="/images/mysql/mysql-5.png" alt=""></li></ul></li></ul> <h3 id="聚簇索引与非聚簇索引">聚簇索引与非聚簇索引</h3> <ul><li>聚簇索引(InnoDB)
<ul><li>不是单独的索引类型，而是一种数据存储方式，指的是数据行跟相邻的键值紧凑的存储在一起
<ul><li>优点
<ol><li>可以把相关数据保存在一起</li> <li>数据访问更快，因为索引和数据保存在同一个树中</li> <li>使用覆盖索引扫描的查询可以直接使用页节点中的主键值</li></ol></li> <li>缺点
<ol><li>聚簇数据最大限度地提高了IO密集型应用的性能，如果数据全部在内存，那么聚簇索引就没有什么优势</li> <li>插入速度严重依赖于插入顺序，按照主键的顺序插入是最快的方式</li> <li>更新聚簇索引列的代价很高，因为会强制将每个被更新的行移动到新的位置</li> <li>基于聚簇索引的表在插入新行，或者主键被更新导致需要移动行的时候，可能面临页分裂的问题</li> <li>聚簇索引可能导致全表扫描变慢，尤其是行比较稀疏，或者由于页分裂导致数据存储不连续的时候</li></ol></li></ul></li></ul></li> <li>非聚簇索引(MyISAM)
<ul><li>数据文件跟索引文件分开存放</li></ul></li></ul> <h3 id="覆盖索引">覆盖索引</h3> <ul><li>基本介绍
<ol><li>如果一个索引包含所有需要查询的字段的值，我们称之为覆盖索引</li> <li>不是所有类型的索引都可以称为覆盖索引，覆盖索引必须要存储索引列的值</li> <li>不同的存储实现覆盖索引的方式不同，不是所有的引擎都支持覆盖索引，memory不支持覆盖索引</li></ol></li> <li>优势
<ol><li>索引条目通常远小于数据行大小，如果只需要读取索引，那么mysql就会极大的较少数据访问量</li> <li>因为索引是按照列值顺序存储的，所以对于IO密集型的范围查询会比随机从磁盘读取每一行数据的IO要少的多</li> <li>一些存储引擎如MYISAM在内存中只缓存索引，数据则依赖于操作系统来缓存，因此要访问数据需要一次系统调用，这可能会导致严重的性能问题</li> <li>由于INNODB的聚簇索引，覆盖索引对INNODB表特别有用</li></ol></li> <li>案例演示
<ol><li>当发起一个被索引覆盖的查询时，在explain的extra列可以看到using index的信息，此时就使用了覆盖索引</li></ol></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> store_id<span class="token punctuation">,</span>film_id <span class="token keyword">from</span> inventory\G
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">1.</span> <span class="token keyword">row</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
           id: <span class="token number">1</span>
  select_type: <span class="token keyword">SIMPLE</span>
        <span class="token keyword">table</span>: inventory
   partitions: <span class="token boolean">NULL</span>
         <span class="token keyword">type</span>: <span class="token keyword">index</span>
possible_keys: <span class="token boolean">NULL</span>
          <span class="token keyword">key</span>: idx_store_id_film_id
      key_len: <span class="token number">3</span>
          ref: <span class="token boolean">NULL</span>
         <span class="token keyword">rows</span>: <span class="token number">4581</span>
     filtered: <span class="token number">100.00</span>
        Extra: <span class="token keyword">Using</span> <span class="token keyword">index</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ol start="2"><li>在大多数存储引擎中，覆盖索引只能覆盖那些只访问索引中部分列的查询。不过，可以进一步的进行优化，可以使用innodb的二级索引来覆盖查询。</li></ol> <blockquote><p>例如：actor使用innodb存储引擎，并在last_name字段又二级索引，虽然该索引的列不包括主键actor_id，但也能够用于对actor_id做覆盖查询</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> actor_id<span class="token punctuation">,</span>last_name <span class="token keyword">from</span> actor <span class="token keyword">where</span> last_name<span class="token operator">=</span><span class="token string">'HOPPER'</span>\G
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">1.</span> <span class="token keyword">row</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
           id: <span class="token number">1</span>
  select_type: <span class="token keyword">SIMPLE</span>
        <span class="token keyword">table</span>: actor
   partitions: <span class="token boolean">NULL</span>
         <span class="token keyword">type</span>: ref
possible_keys: idx_actor_last_name
          <span class="token keyword">key</span>: idx_actor_last_name
      key_len: <span class="token number">137</span>
          ref: const
         <span class="token keyword">rows</span>: <span class="token number">2</span>
     filtered: <span class="token number">100.00</span>
        Extra: <span class="token keyword">Using</span> <span class="token keyword">index</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">总字数:</span> <span class="words">2,483</span> <span class="prefix">字　</span> <span class="prefix">上次更新:</span> <span class="time">2023-03-14 00:25:11</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ce51a5d3.js" defer></script><script src="/assets/js/3.f24ff8fe.js" defer></script><script src="/assets/js/4.1273e66a.js" defer></script><script src="/assets/js/48.02d9740f.js" defer></script>
  </body>
</html>
