(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{657:function(t,e,s){"use strict";s.r(e);var r=s(17),n=Object(r.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"redis的集群-主从复制、cap、paxos、cluster分片集群02"}},[t._v("redis的集群：主从复制、CAP、PAXOS、cluster分片集群02")]),t._v(" "),s("h2",{attrs:{id:"集群"}},[t._v("集群")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Redis多种集群方案")]),t._v(" "),s("ul",[s("li",[t._v("Twemproxy "),s("a",{attrs:{href:"https://github.com/twitter/twemproxy",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/twitter/twemproxy"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Predixy "),s("a",{attrs:{href:"https://github.com/joyieldInc/predixy",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/joyieldInc/predixy"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("redis-cerberus "),s("a",{attrs:{href:"https://github.com/projecteru/redis-cerberus",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/projecteru/redis-cerberus"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Codis "),s("a",{attrs:{href:"https://github.com/CodisLabs/codis",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/CodisLabs/codis"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("Redis Cluster "),s("a",{attrs:{href:"https://redis.io/topics/cluster-tutorial",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://redis.io/topics/cluster-tutorial"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[s("p",[t._v("modula hash+取模")]),t._v(" "),s("ul",[s("li",[t._v("影响分布式下的扩展性（增加节点 数据全局洗牌）")])])]),t._v(" "),s("li",[s("p",[t._v("random 消息队列")]),t._v(" "),s("ul",[s("li",[t._v("特定使用场景")])])]),t._v(" "),s("li",[s("p",[t._v("ketama 一致性哈希")]),t._v(" "),s("ul",[s("li",[t._v("不会造成全局洗牌 不")]),t._v(" "),s("li",[t._v("新增节点造成一小部分数据不能命中")]),t._v(" "),s("li",[t._v("问题：击穿，压到mysql")]),t._v(" "),s("li",[t._v("方案：设法取离我最近的2个物理节点")])])]),t._v(" "),s("li",[s("p",[t._v("Redis Cluster 无主模型")])])]),t._v(" "),s("h2",{attrs:{id:"数据分治"}},[t._v("数据分治")]),t._v(" "),s("ul",[s("li",[t._v("聚合操作很难实现")]),t._v(" "),s("li",[t._v("事物")])]),t._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://developer.aliyun.com/mirror/epel?spm=a2c6h.13651102.0.0.4d691b11bYR2UH",target:"_blank",rel:"noopener noreferrer"}},[t._v("Epel 镜像"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@fobgochod ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /etc/yum.repos.d/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@fobgochod yum.repos.d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@fobgochod yum.repos.d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yum clean all")]),t._v("\nRepository epel is listed "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" than once "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the configuration\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),t._v(" files removed\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@fobgochod yum.repos.d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@fobgochod ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yum search autoconf")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("blockquote",[s("p",[t._v("02.16.50")])]),t._v(" "),s("h2",{attrs:{id:"演示"}},[t._v("演示")]),t._v(" "),s("h3",{attrs:{id:"twemproxy"}},[t._v("Twemproxy")]),t._v(" "),s("h3",{attrs:{id:"predixy"}},[t._v("Predixy")]),t._v(" "),s("h3",{attrs:{id:"redis-cluster"}},[t._v("Redis Cluster")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("redis-cli --cluster "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);