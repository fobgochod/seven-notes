(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{577:function(t,e,a){"use strict";a.r(e);var n=a(4),s=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"documentation"}},[t._v("Documentation")]),t._v(" "),e("h2",{attrs:{id:"mariadb-server-documentation"}},[t._v("MariaDB Server Documentation")]),t._v(" "),e("p",[t._v("官网帮助文档地址：")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://mariadb.com/kb/en/documentation",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/documentation"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://mariadb.com/kb/zh-cn/mariadb-documentation",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/zh-cn/mariadb-documentation"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("参数介绍："),e("a",{attrs:{href:"https://mariadb.com/kb/en/server-system-variables/#sql_mode",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/server-system-variables/#sql_mode"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("数据类型："),e("a",{attrs:{href:"https://mariadb.com/kb/en/library/data-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/library/data-types"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("数据类型字节："),e("a",{attrs:{href:"https://mariadb.com/kb/en/library/data-type-storage-requirements",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/library/data-type-storage-requirements"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("UPDATE语法："),e("a",{attrs:{href:"https://mariadb.com/kb/zh-cn/update",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/zh-cn/update"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("SQL Statements："),e("a",{attrs:{href:"https://mariadb.com/kb/en/library/sql-statements",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/library/sql-statements"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("快速插入："),e("a",{attrs:{href:"https://mariadb.com/kb/zh-cn/how-to-quickly-insert-data-into-mariadb",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/zh-cn/how-to-quickly-insert-data-into-mariadb"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("备份和恢复："),e("a",{attrs:{href:"https://mariadb.com/kb/en/library/backing-up-and-restoring-databases",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/library/backing-up-and-restoring-databases"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("错误码："),e("a",{attrs:{href:"https://mariadb.com/kb/en/library/mariadb-error-codes",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/library/mariadb-error-codes"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("SQLSTATE："),e("a",{attrs:{href:"https://mariadb.com/kb/en/sqlstate",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/sqlstate"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("Error Codes："),e("a",{attrs:{href:"https://mariadb.com/kb/en/mariadb-error-codes",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/mariadb-error-codes"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"varchar"}},[t._v("Varchar")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mysql语句最大长度")]),t._v("\nshow variables like "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'max_allowed_packet'")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启mysql数据检查")]),t._v("\nshow variables like "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'innodb_strict_mode'")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[t._v("参考："),e("a",{attrs:{href:"https://mariadb.com/kb/en/library/innodb-strict-mode",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://mariadb.com/kb/en/library/innodb-strict-mode"),e("OutboundLink")],1)]),t._v(" "),e("ol",[e("li",[t._v("Mysql每行记录的最大值为64k（BLOB and TEXT数据类型不纳入统计），即65535个字节（表所有字段加起来的大小）")]),t._v(" "),e("li",[t._v("而varchar要用1-2字节来存储字段长度，小于255的1字节，大于255的2字节。")]),t._v(" "),e("li",[t._v("Mysql 5.0后,英文字符固定都是一个字节，汉字字符根据编码方式占不同字节，UTF-8占3个字节，GBK占了2个字节。")])]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 统计字节个数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 统计字符个数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" char_length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 例子")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'aa'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'悟空'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",char_length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'aa'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",char_length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'悟空'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])]),e("p",[e("img",{attrs:{src:"/images/mariadb/mariadb-1.png",alt:"01"}})]),t._v(" "),e("ul",[e("li",[t._v("UTF-8编码：最大长度是"),e("code",[t._v("21844")]),t._v("。根据上面信息可以推算出(65535-2)/3=21844余1。")]),t._v(" "),e("li",[t._v("GBK编码: 最大长度是"),e("code",[t._v("32766")]),t._v("。根据上面信息可以推算出(65535-2)/2=32766余1。")])]),t._v(" "),e("h2",{attrs:{id:"timeout"}},[t._v("timeout")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://mariadb.com/kb/en/mariadb-maxscale-22-mariadb-maxscale-configuration-usage-scenarios/#connection_timeout",target:"_blank",rel:"noopener noreferrer"}},[t._v("connection_timeout"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("connection_timeout\nThe connection_timeout parameter is used to disconnect sessions to MariaDB MaxScale that have been idle "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" too long. \nThe session timeouts are disabled by default. To "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" them, define the "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" seconds "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the service's configuration \nsection. A value of zero is interpreted as no timeout, the same as "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" the parameter is not defined.\n\nWarning: If a connection is idle "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" longer than the configured connection timeout, it will be forcefully disconnected and a\nwarning will be logged "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the MaxScale log file. If you are performing long-running maintenance operations "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e.g. ALTER \nTABLE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" either "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" them with a direct connection to the server or "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" connection_timeout to zero before executing them.\n\nExample:\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Test Service"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("connection_timeout")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("p",[e("a",{attrs:{href:"https://mariadb.com/kb/en/server-system-variables/#wait_timeout",target:"_blank",rel:"noopener noreferrer"}},[t._v("wait_timeout"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("wait_timeout\n· Description: Time "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" seconds that the server waits "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" a connection to become active before closing it. The \n  session value is initialized when a thread starts up from either the global value, "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" the connection is non-interactive, \n  or from the interactive_timeout value, "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" the connection is interactive.\n· Commandline: --wait-timeout"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n· Scope: Global, Session\n· Dynamic: Yes\n· Type: numeric\n· Default Value: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("28800")]),t._v("\n· Range: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Windows"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" to "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2147483")]),t._v("\n· Range: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Other"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" to "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("31536000")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("p",[e("a",{attrs:{href:"https://mariadb.com/kb/en/server-system-variables/#interactive_timeout",target:"_blank",rel:"noopener noreferrer"}},[t._v("interactive_timeout"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("interactive_timeout\n· Description: Time "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" seconds that the server waits "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" an interactive connection "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("one that connects with the \n  mysql_real_connect"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" CLIENT_INTERACTIVE option"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to become active before closing it. See also wait_timeout.\n· Commandline: --interactive-timeout"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n· Scope: Global, Session\n· Dynamic: Yes\n· Data Type: numeric\n· Default Value: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("28800")]),t._v("\n· Range: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Windows"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" to "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2147483")]),t._v("\n· Range: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Other"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" to "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("31536000")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br")])]),e("h3",{attrs:{id:"mysql-参数wait-timeout和interactive-timeout以及空闲超时的实现"}},[t._v("MySQL：参数wait_timeout和interactive_timeout以及空闲超时的实现")]),t._v(" "),e("p",[e("a",{attrs:{href:"http://blog.itpub.net/7728585/viewspace-2637237",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://blog.itpub.net/7728585/viewspace-2637237"),e("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=s.exports}}]);